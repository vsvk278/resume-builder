<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Resume Builder — Login</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <style>
    :root{
      --bg1:#0f6b63;
      --bg2:#0fb8b0;
      --card:#072227;
      --white:#fff;
      --muted:#b6d9d6;
    }
    html,body{height:100%;margin:0;font-family:Inter, system-ui, Arial, sans-serif}
    body{
      background: linear-gradient(135deg,var(--bg1) 0%, var(--bg2) 100%);
      display:flex;align-items:center;justify-content:center;
      padding:32px;
      color:var(--white);
    }
    .container{width:100%;max-width:720px;padding:48px;border-radius:12px;background:transparent;}
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      padding:40px;border-radius:12px;box-shadow: 0 18px 40px rgba(2,20,18,0.35);
      backdrop-filter: blur(6px);
    }
    h1{margin:0 0 8px;font-size:36px;text-align:center}
    p.lead{margin:0 0 28px;text-align:center;color:rgba(255,255,255,0.9)}
    label{display:block;font-size:12px;color:rgba(255,255,255,0.85);margin-bottom:8px;font-weight:700}
    input[type=text], input[type=password], input[type=email]{
      width:100%;padding:18px;border-radius:28px;border:0;outline:none;
      background:#fff;color:#0b2b2a;font-weight:700;letter-spacing:0.6px;
      box-shadow:inset 0 2px 0 rgba(0,0,0,0.05);
      margin-bottom:18px;font-size:14px;
    }
    .row{display:flex;gap:12px}
    .row > *{flex:1}
    .btn{
      width:100%;display:inline-block;padding:14px 18px;border-radius:28px;border:0;
      background: linear-gradient(180deg,#06b6d4,#059ea7);color:#012;font-weight:800;letter-spacing:1px;
      cursor:pointer;box-shadow:0 6px 14px rgba(2,20,18,0.25);
    }
    .ghost{background:rgba(255,255,255,0.12);color:#fff}
    .muted{color:rgba(255,255,255,0.85);font-size:13px;text-align:center;margin-top:14px}
    .links{display:flex;justify-content:center;gap:18px;margin-top:18px}
    .links a{color:#fff;text-decoration:underline;cursor:pointer}
    .small{font-size:13px;color:rgba(255,255,255,0.9)}
    #msg{color:#ffdede;margin-top:10px;text-align:center}
  </style>
</head>
<body>
  <div class="container">
    <div class="card" role="main">
      <h1>Resume Builder</h1>
      <p class="lead">Sign up or log in to save your profile and build tailored resumes</p>

      <div id="auth-area">
        <label>Email</label>
        <input id="email" type="email" placeholder="you@domain.com" />
        <label>Password</label>
        <input id="password" type="password" placeholder="Choose a password" />

        <div class="row" style="margin-bottom:12px">
          <button id="btn-login" class="btn">Log in</button>
          <button id="btn-signup" class="btn ghost">Sign up</button>
        </div>

        <div class="links">
          <a id="forgot" href="forgot.html">Forgot password?</a>
          <a id="to-home" href="home.html">Skip to home (dev only)</a>
        </div>

        <div id="msg"></div>
      </div>
    </div>
  </div>

  <!-- Supabase UMD -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js/dist/umd/supabase.min.js"></script>
  <script>
    // update these if needed (your project)
    const SUPABASE_URL = 'https://aisuwbgwhvbikdvoming.supabase.co'
    const SUPABASE_ANON_KEY = 'sb_publishable_OZ2XcYvyUC3cpTUPUXhTig_bH_U1QO7'

    const { createClient } = supabase
    const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

    const email = document.getElementById('email')
    const password = document.getElementById('password')
    const msg = document.getElementById('msg')

    document.getElementById('btn-signup').onclick = async () => {
      msg.textContent = 'Signing up...'
      const { data, error } = await supabase.auth.signUp({ email: email.value, password: password.value })
      if (error) msg.textContent = 'Error: ' + error.message
      else msg.textContent = 'Signup success — check email if required. Now log in.'
    }

    document.getElementById('btn-login').onclick = async () => {
      msg.textContent = 'Logging in...'
      const { data, error } = await supabase.auth.signInWithPassword({ email: email.value, password: password.value })
      if (error) { msg.textContent = 'Error: ' + error.message; return }
      // success -> redirect to home
      msg.textContent = 'Login OK — redirecting...'
      // small delay for UX
      setTimeout(()=> location.href = 'home.html', 300)
    }

    // if already logged in, auto-redirect
    (async ()=>{
      const { data: { user } } = await supabase.auth.getUser()
      if (user) location.href = 'home.html'
    })()
  </script>
</body>
</html>
